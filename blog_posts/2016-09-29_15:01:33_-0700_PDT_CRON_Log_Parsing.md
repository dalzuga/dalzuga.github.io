2016-09-29_15:01:33_-0700_PDT
# CRON_Log_Parsing [working title]

Recently, as part of our daily routine of preparing for SRE interview
questions, Guillaume started sending us a packet of exercises. One of
the exercises was particularly interesting to me. I liked this
question because it illustrates the importance of good thought process.

The exercise is as follows:

```
By using this cron log:
https://s3.amazonaws.com/holbertonintranet/files/sandbox/cron

Provide the list of all cron commands with the delay ("The cron task
'Holberton' is executed each 50 seconds")
```
Good thought process, in my opinion, is being aware of the assumptions
you are making when interpreting a problem, if any. In an interview
setting, these assumptions generate clarifying questions.

This problem jumped out at me because the first assumption I made was
pretty ugly. As part of my strategy to make sure I don't overlook any
special cases (and also for maximizing the learning I get from each
problem), I like to imagine the worst of a problem before breaking it
down into smaller chunks (or looking inside the log itself, in this
case.)  So, I pretended that this is a very complex server for a
ficticious developer team, with thousands of jobs being run by CRON
and many unique commands. No one individual really knows what this
server does, but everyone relies on it to run their command at a set
frequency.

Just by thinking of this, it occurred to me that this problem must not
have a solution. Or, at least, not a unique solution.

### The clarifying question

The clarifying question that jumped at me was as follows: "Can I
assume that each command is run by exactly one CRON job?"

In other words, are there two people on the team that are unknowingly
running the same command, perhaps with different delays?

Since Guillaume is not generally in the habit of asking trick
questions (like Julien is) I found it safe to assume, at this point,
that we are not expected to handle this complication. But I'm happy to
have thought of it because I'll be aware of this limitation.

```
Assumption: each unique command is run by one and only one CRON job.
```

The structure of the problem is clearer, and our task is simplified.

The lines on the log file look like this:

`Sep 21 17:30:01 ip-172-31-27-229 CROND[process ID]: (root) CMD some_command`

Using python's regular expressions module, I parsed the file with the following search:

```
regexp = "CROND\[[0-9]*\]: \(root\) CMD (.*)"
s = re.search(regexp, line)
```

You can see that I am capturing the command with `(.*)` and access it
with `s.group(1)`.

Before diving into the solution, I first decided to count how many
unique CRON commands there are in this particular log file. Also, I
decided to count how many CRON commands there are in total just in
case I need to make a sanity check later on.

This was the result:

```
uniqueCmdCount: 10
count by CROND: 1999
```